<canvas width="600" height="400"></canvas>

<script type="text/javascript">

    function desenhaRetangulo(x, y, largura, altura, cor) {
        var tela = document.querySelector('canvas');
        var pincel = tela.getContext('2d');

        pincel.fillStyle=cor;
        pincel.fillRect(x,y, largura, altura);
        pincel.strokeStyle='black';
        pincel.strokeRect(x,y, largura, altura);
    }

    function desenhaTexto(x, y, texto, fonte) {
        var tela = document.querySelector('canvas');
        var pincel = tela.getContext('2d');

        pincel.font= fonte;
        pincel.fillStyle='black';
        pincel.fillText(texto, x, y);    
    }

    function desenhaBarra(x, y, serie, cores, titulo, porcentagem) {
    // aqui precisamos desenhar vários retângulos!
        var tela = document.querySelector('canvas');
        var pincel = tela.getContext('2d');

        desenhaTexto(x, y - 20, titulo, "20px Georgia");

        var tamanho = 0;

        for (var contador = 0; contador < serie.length; contador++) {

            var altura = serie[contador];

            desenhaRetangulo(x, y + tamanho, 50, altura, cores[contador]);
            desenhaTexto(x - 45, y + (tamanho + 8), nome[contador], "10px Georgia");
            desenhaTexto(x + 55, y + (tamanho + 8), porcentagem[contador], "9px Arial");

            tamanho = tamanho + altura;

        }
    }
    
    // Pre-definições

    var cores = ["blue", "green", "yellow", "red"];
    var serie2015 = [50, 25, 20, 5];
    var serie2016 = [65, 20, 13, 2];

    var porcentagem2015 = ["50%", "25%", "20%", "5%"]
    var porcentagem2016 = ["65%", "20%", "13%", "2%"];

    var nome = ["Chrome -", "Firefox -", "Safari -", "Outros -"];
    
    // Execução

    desenhaBarra(50, 50, serie2015, cores, "2015", porcentagem2015);
    desenhaBarra(200, 50, serie2016, cores, "2016", porcentagem2016);

</script>